import{r as c,b as f,u as b,j as e,_ as m}from"./index-o8-be8Tz.js";const N=()=>{const[a,t]=c.useState({title:"",description:"",tags:""}),[x,l]=c.useState(!1),p=f(),{id:i}=b();c.useEffect(()=>{const s=new AbortController;return(async()=>{const n=await fetch(`/api/audio-book/getu/${i}`,{signal:s.signal,method:"GET"}),{title:d,description:g,tags:h}=await n.json();t({title:d,description:g,tags:h})})(),()=>s.abort()},[]);const o=s=>{t({...a,[s.target.id]:s.target.value})},u=async s=>{s.preventDefault(),l(!0);const r=await fetch(`/api/audio-book/update/${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),{success:n,message:d}=await r.json();n===!0?(m.success(d),t({description:"",tags:"",title:""}),l(!1),p(`/book/${i}`)):(m.error("got an error"),l(!1))};return e.jsxs("section",{className:"flex justify-evenly flex-col gap-4 m-auto items-center mt-6 mb-24",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Update Your Audio Book"}),e.jsxs("form",{onSubmit:u,className:"flex justify-between w-[70%]  gap-8  flex-row",children:[e.jsxs("div",{className:"p-3 w-[50%] ml-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Name"}),e.jsx("input",{type:"text",id:"title",onChange:s=>o(s),value:a.title,className:"p-2 w-[100%] border rounded",placeholder:"Name",required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Description"}),e.jsx("textarea",{id:"description",className:"p-5 w-[100%] border rounded",value:a.description,placeholder:"Description",onChange:s=>o(s)})]}),e.jsxs("div",{className:"flex flex-col gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Tags"}),e.jsx("input",{type:"text",id:"tags",className:"p-2 w-[100%] border rounded",placeholder:"Add Tags",value:a.tags,onChange:s=>o(s)})]}),e.jsxs("div",{className:"flex flex-col gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Image"}),e.jsx("input",{type:"file",id:"img",accept:"image/*",className:"p-2 w-[100%] border rounded bg-white",onChange:()=>console.log("handleFile")})]})]}),e.jsxs("div",{className:"flex flex-col mt-5 w-[50%]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 mb-2",children:[e.jsx("h1",{className:"text-base font-semibold",children:"Audio Epicodes:"}),e.jsx("span",{className:"text-sm",children:"Add episode one after another "})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"file",id:"epi",accept:"audio/*",multiple:!0,className:"p-2 w-[100%] border rounded bg-white",onChange:()=>console.log("handleFile")})}),e.jsx("button",{type:"submit",disabled:x,className:"p-2 bg-black text-white font-semibold disabled:opacity-85 rounded ",children:"Update"})]})]})]})};export{N as default};
