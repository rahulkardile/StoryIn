import{r as a,b as w,j as e,_ as i}from"./index-o8-be8Tz.js";const S=()=>{const[x,r]=a.useState(""),[p,d]=a.useState(""),[f,n]=a.useState(""),[g,c]=a.useState(),[h,m]=a.useState(),[b,l]=a.useState(!1),j=w(),u=s=>{var o;const t=(o=s.target.files)==null?void 0:o[0];s.target.id==="img"&&(s.target.files!=null?c(t):i.error("Can't upload img")),s.target.id==="epi"&&(s.target.files!=null?m(t):i.error("Can't upload img"))},N=async s=>{s.preventDefault(),l(!0);const t=new FormData;t.set("epi",h),t.set("img",g),t.set("title",x),t.set("description",p),t.set("tags",f),console.log(t),(await(await fetch("/api/audio-book/new",{method:"POST",body:t})).json()).success===!0?(i.success("Audio Book successfully created"),m(void 0),c(void 0),d(""),n(""),r(""),l(!1),j("/")):(i.error("got an error"),l(!1))};return e.jsxs("section",{className:"flex justify-evenly flex-col gap-4 m-auto items-center mt-6 mb-24",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"List Your Audio Book"}),e.jsxs("form",{onSubmit:N,className:"flex sm:justify-between w-[90%] sm:[50%] sm:gap-8 flex-col sm:flex-row",children:[e.jsxs("div",{className:"w-full sm:w-[50%] ml-4",children:[e.jsxs("div",{className:"flex flex-col w-[95%] gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Name"}),e.jsx("input",{type:"text",id:"title",onChange:s=>r(s.target.value),className:"p-2 w-[100%] border rounded",placeholder:"Name",required:!0})]}),e.jsxs("div",{className:"flex flex-col w-[95%] gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Description"}),e.jsx("textarea",{id:"description",className:"p-5 w-[100%] border rounded",placeholder:"Description",onChange:s=>d(s.target.value),required:!0})]}),e.jsxs("div",{className:"flex flex-col w-[95%] gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Tags"}),e.jsx("input",{type:"text",id:"tags",className:"p-2 w-[100%] border rounded",placeholder:"Add Tags",onChange:s=>n(s.target.value),required:!0})]}),e.jsxs("div",{className:"flex flex-col w-[95%] gap-1 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Image"}),e.jsx("input",{type:"file",id:"img",accept:"image/*",className:"p-2 w-[100%] border rounded bg-white",onChange:u,required:!0})]})]}),e.jsxs("div",{className:"flex flex-col mt-5 w-full sm:w-[50%]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 mb-2",children:[e.jsx("h1",{className:"text-base font-semibold",children:"Audio Epicodes:"}),e.jsx("span",{className:"text-sm",children:"Add episode one after another "})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"file",id:"epi",accept:"audio/*",required:!0,multiple:!0,className:"p-2 w-[100%] border rounded bg-white",onChange:u})}),e.jsx("button",{type:"submit",disabled:b,className:"p-2 bg-black text-white font-semibold disabled:opacity-85 rounded ",children:"Upload"})]})]})]})};export{S as default};
